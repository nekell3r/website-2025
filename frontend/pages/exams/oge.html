<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" >
        <script src="scripts/payment.js"></script>
        <title>ОГЭ</title>
        <link rel="stylesheet" href="../../assets/css/style_oge.css">
        <style>
            body {
                display: flex;
                flex-direction: column; 
                justify-content: center; 
                align-items: center; 
                font-family: Comic Sans MS, Comic Sans, cursive;
                margin:0px;
                padding: 0px;
                background-color: #3A3A3A
            }
        </style>
    </head>
<body>
    <div class="header2">
        <div class="logo">
            <a href="../../index.html"><img src="../../assets/img/злой рус.png" class="zloy" alt="Злой Русский"></a>
        </div>
        <div class="menu">
            <a href="oge.html">ОГЭ</a>
            <a href="ege.html">ЕГЭ</a>
            <a href="../materials/list.html"><b>МАТЕРИАЛЫ ДЛЯ УРОКОВ</b></a>
        </div>
        <div class="buttons">
            <button class="menu-button" onclick="toggleMenu()">
                <img src="../../assets/img/new_hambur.png" style="margin: -18px 0px 10px -10px; width: 50px;" alt="кнопка меню">
            </button>
        </div>
    </div>

    <b><h1>Продукт "что то с огэ" содержит следующие материалы:</h1></b><br>

    <div class="two-column-block">
        <div class="column left-column">
            <b><h2>1. Материалы для подготовки к Итоговому Собеседованию</h2></b>
            <img src = "../../assets/img/work_note4.png" alt="Левое изображение"><br>
            <img src = "../../assets/img/монолог.png" alt="Левое изображение">
            <img src = "../../assets/img/монолог1.png" alt="Левое изображение">
            <h3> Варианты собеседования </h3>
            <img src = "../../assets/img/вар собес.png" alt="Левое изображение">
            <h3> По результатам подготовки в 2023 году 100% учеников успешно сдали собеседование </h3>
        </div>
        
        <div class="column right-column">
            <b><h2> 2. Материалы для подготовки к сочинению и изложению </h2></b>
            <img src = "../../assets/img/work_note7.png" alt="Правое изображение">
            <img src = "../../assets/img/клише.png" alt="Правое изображение">
            <img src = "../../assets/img/какая то штука.png" alt="Правое изображение">
            <img src = "../../assets/img/work_note8.png" alt="Правое изображение">
            <img src = "../../assets/img/text.png" alt="Правое изображение">
            <h3> Так же в продукт включен сборник образцов сочинений к темам ФИПИ </h3>
        </div>
    </div>

    <div class="full-width-line-container">
        <b><h2 class="text_and_over-line"> 3.  Материалы для подготовки к тестовой части </h2></b>
    </div>
    <div class="two-column-block">
        <div class="column left-column">
            <img src = "../../assets/img/work_note5.png" style="margin-top: 60px;" alt="Левое изображение">
            <img src = "../../assets/img/орфограммы.png" alt="Левое изображение">
            <img src = "../../assets/img/орфограммы в суф.png" alt="Левое изображение">
        </div>
        <div class="column right-column">
            <h3>Рабочая тетрадь по синтаксису </h3>
            <img src = "../../assets/img/work_note6.png" alt="Правое изображение">
            <img src = "../../assets/img/виды членов.png" alt="Правое изображение">
            <img src = "../../assets/img/постановка препинаний.png" alt="Правое изображение">
        </div>
    </div>
    
    <h3 style="width: 100%; 
    align-items: center;
    text-align: center;"> Так же в продукт включен сборник заданий тестовой части из открытого банка ФИПИ </h3>
    <div class="text_and_line-container">
        <h3 style="display: flex;"> По результатам подготовки в 2023 году 80% учеников сдали тестовую часть более чем на х баллов</h3>
    </div>


    <div class="pay_cash" style="margin-left: 100px;">
        <b><h1 style="display: flex;">Стоимость продукта - X рублей.</h1></b>
        <b><h1 style="display: flex;">При оплате вы получаете ссылки на скачивание каждого
            из соответствующих материалов в формате PDF:</h1></b>
        
        <b><h1 style="display: flex;">Так же в качестве бонуса вам будет предоставлены ссылки на 
            есурсы для практики по всем заданиям тестовой части - onlinetestpad и edapp</h1></b>
    </div>
    <div>
        <input type="text" id="userInput-oge" placeholder="email для отправки чека" onclick="clearPlaceholder(this)">
    </div>
    <div class="error-message" id="emailError-oge">Пожалуйста, введите email!</div>
    <button style="width: 15%;" class="payment-button" data-product-slug="oge" data-input-id="userInput-oge" data-error-id="emailError-oge">Страница оплаты</button>
    
    <div class="text_and_line-container">
        <b><h1 style="display: flex;">Возможны способы оплаты - СБП, Карта МИР, Т-pay</h1></b>
    </div>

    <div class="the_end" style="padding-top: 20px">
        <h1 style="flex: 1;
        text-align: center;">Служебная информация</h1>
        <img src="../../assets/img/злой рус.png" alt="Злой Русский логотип">
    </div>
    <script>

        const inputField = document.getElementById('userInput');
    const originalPlaceholder = inputField.placeholder;

    // Обработчик клика по полю ввода
    inputField.addEventListener('focus', function() {
        this.placeholder = '';
    });

    // Обработчик клика вне поля ввода
    document.addEventListener('click', function(event) {
        if (event.target !== inputField) {
            if (inputField.value === '') {
                inputField.placeholder = originalPlaceholder;
            }
        }
    });
    </script>
<div class="dropdown" id="dropdown">
    <span class="close" onclick="toggleMenu()">&times;</span>
    <a href="../auth/login.html">авторизация/личный кабинет</a>
    <a href="responses/oge-response.html">отзывы</a>
    <a href="../materials/questions.html">FAQ</a>
</div>

<script>
    function toggleMenu() {
        var menu = document.getElementById("dropdown");
        menu.classList.toggle("active");
    }

    // Добавляем обработчик для кнопки авторизации
    document.getElementById('auth-link').addEventListener('click', async function(e) {
    e.preventDefault();

    try {
        const response = await fetch('https://slick-rice-heal.loca.lt/me/info', {
            method: 'GET',
            credentials: 'include',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'ngrok-skip-browser-warning': 'true' // Обход предупреждения ngrok
            }
        });

        if (response.status === 401) {
            // Пользователь не авторизован
            window.location.href = '/auto.html';
            return;
        }


        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const userData = await response.json();
        handleUserData(userData);
        if (userData && userData.id && userData.name) {
            // Сохраняем данные пользователя перед переходом
            sessionStorage.setItem('userData', JSON.stringify(userData));

            // Перенаправляем в личный кабинет
            window.location.href = 'lk.html';
        } else {
            throw new Error('Получены некорректные данные пользователя');
        }

    } catch (error) {
        console.error('Ошибка:', error);
        // Попробуем альтернативный подход без credentials
        tryAlternativeApproach();
    }
});

async function tryAlternativeApproach() {
    try {
        const response = await fetch('https://slick-rice-heal.loca.lt/me/info', {
            method: 'GET',
            headers: {
                'Accept': 'application/json',
                'ngrok-skip-browser-warning': 'true'
            }
        });

        const data = await response.json();
        console.log('Успешно (без куки):', data);
        handleUserData(data);
    } catch (error) {
        console.error('Ошибка альтернативного запроса:', error);
        alert('Не удалось получить данные. Пожалуйста, войдите в систему.');
        window.location.href = 'auto.html';
    }
}
</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="../../assets/js/script.js"></script>
</body>
</html>