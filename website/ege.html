<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" >
    <title>ЕГЭ</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            display: flex;
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            font-family: Comic Sans MS, Comic Sans, cursive;
            margin:0px;
            padding: 0px;
            background-color: #3A3A3A
        }
    </style>
</head>
<body>
    <div class="header2">
        <div class="logo">
            <img src="img/злой рус.png" class="zloy" alt="Злой Русский">
        </div>
        <div class="menu">
            <a href="oge.html">ОГЭ</a>
            <a href="ege.html">ЕГЭ</a>
            <a href="materials.html"><b>МАТЕРИАЛЫ ДЛЯ УРОКОВ</b></a>
        </div>
        <div class="buttons">
            <button class="menu-button">
                <img src="img/пж.jpg" style="width: 50px;" alt="ПЖ">
            </button>
            <button class="hamburger-button" onclick="toggleMenu()">
                <img src="img/burger.jpg" style="margin: -18px 0px 10px -10px; width: 50px;" alt="кнопка бургер">
            </button>

        </div>
    </div>

    <b><h2>Продукт тыры пыры ЕГЭ содержит следующие материалы</h2></b><br>
    
    <div class="two-column-block">
        <div class="column left-column">
            <b><h3> 1. Рабочая тетрадь для подготовки к тестовой части ЕГЭ</h3></b>
            <b><h3>Какой то текст</h3></b>
            <img src="img/work_note3.png" alt="work note3">
            <b><h3>Примеры заданий из рабочей тетради:</h3></b>
            <img src="img/wn.png" alt="wn">
            <b><h3>Орфография</h3></b>
            <img src="img/simbol.png" alt="simbol">
        </div>
        <div class="column right-column">
            <b><h3> 2. Рабочая тетрадь для подготовки к сочинению ЕГЭ</h3></b>
            <b><h3>Какой то текст</h3></b>
            <img src="img/work_note2.png" alt="Правое изображение">
            <b><h3>Примеры заданий из рабочей тетради:</h3></b>
            <b><h3>Комментарий. Обработка</h3></b>
            <img src="img/comm.jpg" alt="Правое изображение">
            <b><h3>Проблема и авторская позиция. Отработка</h3></b>
            <img src="img/пример2.png" alt="Правое изображение">
        </div>
    </div>
    <h3 class="text_ege_under">По резульатам подготовки к сочинению ЕГЭ в 2024 году 100% учеников успешно сдали его с первой попытки. 
        При этом 40% учеников получили от 19 до 21 баллов.</h3>
    <div class="ege_work3_container">
        <b><h3> 3.Рабочая тетрадь для подготовки к Итоговому Сочинению(ИС)</h3></b>
        <h3>Какой-то текст с информацией про материал</h3>
        <img src="img/work_note.jpg" class="work_note" alt="Work note">
    </div>

    <div style="position: relative;
                text-align: center;">
        <b><h3>Примеры заданий из рабочей тетради:</h3></b><br>
        <img src="img/1пример.png" class="one_instance" alt="Свеча горела">
        <b><h3>Построение логики аргументации. Практика</h3></b>
        <h4>В каких жизненных ситуациях нужно быть готовым к смелым поступкам?</h4>
        <img src="img/logic_arg.png" class="one_instance" alt="logic_arg">
    </div>
    <div class="text_and_line-container">
        <h3 class="">По результатам подготовки к итоговому сочинению в 2024 году 100% учеников успешно сдали его с первой попытки.
            При этом 50% учеников получили максимальный балл. </h3>
    </div>

    <div class="pay_cash">
        <b><h1 style="display: flex;">Стоимость продукта - X рублей.</h1></b>
        <b><h1 style="display: flex;">При оплате вы получаете ссылки на скачивание 3 PDF-файлов:</h1></b>
        <ol class="list_pay">
            <li class="pay">"Сочинение ЕГЭ рабочая тетрадь"</li>
            <li class="pay">"Итоговое сочинение рабочая тетрадь"</li>
            <li class="pay">"Тестовая часть ЕГЭ рабочая тетрадь"</li>
        </ol>
        <b><h1 style="display: flex;">В дополнение к 1 и 2 файлу вы получаете 2 сборника видеоразборов сочинений</h1></b>
    </div>
    <div>

    </div>
    <div>
        <input type="text" id="userInput" placeholder="email для отправки чека(обязательно)" onclick="clearPlaceholder()"> 
    </div>
    <div class="error-message" id="emailError">Пожалуйста, введите email!</div>
    <button style="width: 15%;" class="payment-button" onclick="handlePayment()">Страница оплаты</button>

    <div class="text_and_line-container">
        <b><h1 style="display: flex;">Возможны способы оплаты - СБП, Карта МИР, Т-pay</h1></b>
    </div>

    <div class="the_end" style="padding-top: 20px">
        <h1 style="flex: 1;
        text-align: center;"
        >Служебная информация</h1>
        <img src="img/злой рус.png" class="zloy_ru" alt="злой рус">
    </div>

    <script>
        function toggleMenu() {
            var menu = document.getElementById("dropdown");
    menu.classList.toggle("active");
        }
    function handlePayment() {
    const email = document.getElementById('userInput').value.trim();
    const emailError = document.getElementById('emailError');

    // Базовые проверки
    if (!email) {
        emailError.style.display = 'block';
        document.getElementById('userInput').classList.add('error');
        return;
    }

    // Проверка формата email
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        emailError.textContent = 'Введите корректный email!';
        emailError.style.display = 'block';
        document.getElementById('userInput').classList.add('error');
        return;
    }

    // Отправка данных
    fetch('https://1d3a-45-12-109-171.ngrok-free.app/payments', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            product_slug: "ege",
            email: email
        }),
        credentials: 'include'
    })
    .then(response => {
        if (!response.ok) throw new Error('Ошибка сети');
        return response.json();
    })
    .then(data => {
        // Перенаправление после успешной оплаты
        if(data.redirect_url) {
            window.location.href = data.redirect_url;
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Ошибка при обработке платежа: ' + error.message);
    });
}

// Обработчики для поля ввода
document.getElementById('userInput').addEventListener('input', function() {
    this.classList.remove('error');
    document.getElementById('emailError').style.display = 'none';
});
    </script>


    <div class="dropdown" id="dropdown">
        <span class="close" onclick="toggleMenu()">&times;</span>
        <a href="#">авторизация/личный кабинет</a>
        <a href="#">отзывы</a>
        <a href="#">о нас</a>
        <a href="#">FAQ</a>
    </div>
